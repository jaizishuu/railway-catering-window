<div class="catering-container">
  <h2>CATERING CHARGES</h2>
  <form #cateringForm="ngForm" (ngSubmit)="onSubmit(cateringForm)">
    <!-- First row -->
    <div class="form-row">
      <div class="form-group">
        <label for="valid-from">VALID FROM</label>
        <input type="date" id="valid-from" name="validFrom" ngModel>
      </div>
      <div class="form-group">
        <label for="train-number">TRAIN NUMBER</label>
        <input type="text" id="train-number" name="trainNumber" ngModel>
      </div>
      <div class="form-group">
        <label for="train-type">TRAIN TYPE</label>
        <input type="text" id="train-type" name="trainType" ngModel>
      </div>
    </div>
    <!-- Second row -->
    <div class="form-row">
      <div class="form-group">
        <label for="class-code">CLASS CODE</label>
        <input type="text" id="class-code" name="classCode" ngModel>
      </div>
      <div class="form-group">
        <label for="catering-type">CATERING TYPE</label>
        <app-dropdown-checkbox (selectedChange)="onCateringTypeChange($event)"></app-dropdown-checkbox>
      </div>
      <div class="form-group">
        <label for="charges">CHARGES</label>
        <select id="charges" name="charges" [(ngModel)]="charges">
          <option value="" disabled selected>Select</option>
          <option value="auto">Auto Populated Charges</option>
          <option value="manual">Feed Charges Manually</option>
        </select>
      </div>
    </div>
    <!-- Charges input fields if user selects "Feed Charges Manually" -->
    <div *ngIf="charges === 'manual'">
      <table>
        <tr>
          <td>
            <label>
              <input type="radio" name="chargesType" value="separate" [(ngModel)]="chargesType"> Enter separately for each type
            </label>
          </td>
          <td>
            <label>
              <input type="radio" name="chargesType" value="overall" [(ngModel)]="chargesType"> Enter overall charges
            </label>
          </td>
        </tr>
      </table>
      <table *ngIf="chargesType === 'separate'">
        <tr *ngFor="let type of selectedCateringType">
          <td>{{ type }}:</td>
          <td><input type="number" [(ngModel)]="separateCharges[type]" name="{{ type }}Charges"></td>
        </tr>
      </table>
      <table *ngIf="chargesType === 'overall'">
        <tr>
          <td>Overall Charges:</td>
          <td><input type="number" name="overallCharges" ngModel></td>
        </tr>
      </table>
    </div>
    <!-- Auto Populated Charges table -->
    <div *ngIf="charges === 'auto'">
      <table border="1">
        <thead>
          <tr>
            <th>FROM STN</th>
            <th>TO STN</th>
            <th>CLASS</th>
            <th>VLD FROM DATE</th>
            <th>VLD UPTO DATE</th>
            <th>MORNING TEA/COFFEE</th>
            <th>BREAKFAST</th>
            <th>LUNCH</th>
            <th>SNACKS</th>
            <th>DINNER</th>
            <th>ICE CREAM</th>
            <th>WATER BOTTLE</th>
            <th>GST</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of autoPopulatedCharges">
            <td>{{ row.fromStn }}</td>
            <td>{{ row.toStn }}</td>
            <td>{{ row.class }}</td>
            <td>{{ row.validFromDate }}</td>
            <td>{{ row.validUptoDate }}</td>
            <td>{{ row.morningTeaCoffee }}</td>
            <td>{{ row.breakfast }}</td>
            <td>{{ row.lunch }}</td>
            <td>{{ row.snacks }}</td>
            <td>{{ row.dinner }}</td>
            <td>{{ row.iceCream }}</td>
            <td>{{ row.waterBottle }}</td>
            <td>{{ row.gst }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <button type="submit">SUBMIT</button>
  </form>
  <!-- Display selected catering types -->
  <div *ngIf="selectedCateringType.length > 0">
    <h3>Selected Catering Types</h3>
    <ul>
      <li *ngFor="let type of selectedCateringType">{{ type }}</li>
    </ul>
  </div>
</div>
